/* === PATCH LOOKUPS — לשים בתחילת הקובץ === */
.root {
    -fx-text-background-color: rgba(255,255,255,0.87);
    -color-fg: #f5f5f7;
    -color-border: rgba(255,255,255,0.12);
    -color-accent: #0A84FF;
    -color-accent-weak: rgba(10,132,255,0.18);
}
/* פופאפים (ComboBox popup / תפריטים / Tooltip) לא תמיד יורשים מההורה */
.combo-box-popup, .context-menu, .tooltip, .menu-item, .list-view {
    -color-fg: #f5f5f7;
    -fx-text-fill: #f5f5f7;
}

/* topbar-dark.css — FULL */

/* שורש הטופ־בר: משתני ברירת־מחדל */
.topbar {
    -color-bg: rgba(28,28,30,0.92);
    -color-fg: #f5f5f7;
    -color-subtle: rgba(255,255,255,0.28);
    -color-border: rgba(255,255,255,0.12);

    /* Accent ברירת־מחדל – כחול */
    -color-accent: #0A84FF;
    -color-accent-weak: rgba(10,132,255,0.18);

    -fx-background-color: -color-bg;
    -fx-padding: 6 10;
    -fx-spacing: 8;
    -fx-font-family: "SF Pro Text", "Segoe UI", system-ui, sans-serif;
    -fx-font-size: 13px;
    -fx-text-fill: -color-fg;
    -fx-border-color: transparent transparent -color-border transparent;
    -fx-border-width: 0 0 1 0;
}

/* מצב DEBUG – מחליף רק את ה-Accent */
.debug-theme .topbar {
    -color-accent: #FFB703;
    -color-accent-weak: rgba(255,183,3,0.22);
}

/* כפתורים כלליים בטופ־בר */
.topbar .button {
    -fx-text-fill: -color-fg;
    -fx-background-radius: 8;
    -fx-padding: 6 12;
    -fx-background-insets: 0;
    -fx-background-color: transparent;
    -fx-border-color: transparent;
}
.topbar .button:hover   { -fx-background-color: rgba(255,255,255,0.08); }
.topbar .button:pressed { -fx-background-color: rgba(255,255,255,0.16); }
.topbar .button:focused { -fx-effect: dropshadow(gaussian, -color-accent, 8, 0.6, 0, 0); }
.topbar .button:disabled { -fx-opacity: 0.55; -fx-effect: none; }

/* כפתור פעולה מודגש (Load Function) — הוסף styleClass="accent" */
.topbar .button.accent {
    -fx-text-fill: white;
    -fx-font-weight: 600;
    -fx-background-radius: 9;
    -fx-background-insets: 0,1;
    -fx-padding: 6 14;
    -fx-background-color:
            linear-gradient(derive(-color-accent, 10%), -color-accent),
            linear-gradient(derive(-color-accent-weak, 30%), derive(-color-accent, -8%));
    -fx-border-color: rgba(255,255,255,0.10);
    -fx-border-radius: 9;
}
.topbar .button.accent:hover {
    -fx-background-color:
            linear-gradient(derive(-color-accent, 15%), derive(-color-accent, 0%)),
            linear-gradient(derive(-color-accent-weak, 35%), derive(-color-accent, -4%));
}
.topbar .button.accent:pressed {
    -fx-background-insets: 1,0;
    -fx-translate-y: 1;
    -fx-effect: none;
}

/* שדה המסלול */
.topbar .path-field {
    -fx-text-fill: -color-fg;
    -fx-prompt-text-fill: rgba(255,255,255,0.45);
    -fx-background-radius: 8;
    -fx-background-insets: 0;
    -fx-background-color: #2C2C2E;
    -fx-border-color: #3A3A3C;
    -fx-border-radius: 8;
    -fx-padding: 6 10;
    -fx-opacity: 1.0;
}
.topbar .path-field:focused {
    -fx-border-color: -color-accent;
    -fx-background-color: #1F1F21;
}

/* === ComboBox של פונקציות (fx:id=cmbFunctions, styleClass=function-combo) === */
.topbar .function-combo {
    -fx-background-color: #2C2C2E;
    -fx-background-insets: 0;
    -fx-background-radius: 8;
    -fx-border-color: #3A3A3C;
    -fx-border-radius: 8;
    -fx-padding: 0;
    -fx-text-fill: -color-fg;
}
.topbar .function-combo:focused {
    -fx-border-color: -color-accent;
    -fx-effect: dropshadow(gaussian, -color-accent, 8, 0.5, 0, 0);
}
.topbar .function-combo .text,
.topbar .function-combo .list-cell .text {
    -fx-fill: -color-fg;
}
.topbar .function-combo .arrow-button {
    -fx-background-color: transparent;
    -fx-padding: 0 6 0 6;
}
.topbar .function-combo .arrow {
    -fx-background-color: -color-fg;
}

/* עיצוב הפריט הנבחר בשדה (button cell) */
.topbar .function-combo .list-cell {
    -fx-text-fill: -color-fg;
    -fx-padding: 6 10;
}
.topbar .function-combo .list-cell:empty {
    -fx-background-color: transparent;
}

/* תפריט הנפתח */
.topbar .function-combo .combo-box-popup .list-view {
    -fx-background-color: #2C2C2E;
    -fx-control-inner-background: #2C2C2E;
    -fx-background-insets: 0;
    -fx-padding: 4 0;
    -fx-border-color: #3A3A3C;
    -fx-border-width: 1;
    -fx-border-radius: 8;
    -fx-background-radius: 8;
}
.topbar .function-combo .combo-box-popup .list-view .list-cell {
    -fx-text-fill: -color-fg;
    -fx-padding: 8 12;
    -fx-background-color: transparent;
}
.topbar .function-combo .combo-box-popup .list-view .list-cell:hover {
    -fx-background-color: rgba(255,255,255,0.07);
}
.topbar .function-combo .combo-box-popup .list-view .list-cell:selected {
    -fx-background-color: -color-accent-weak;
    -fx-text-fill: white;
}

/* תמיכה ב-two-line cell אם הקונטרולר מוסיף מחלקות "primary" ו-"secondary" בלייבלים הפנימיים */
.topbar .function-combo .list-cell .primary {
    -fx-font-weight: 700;
    -fx-text-fill: -color-fg;
    -fx-padding: 0 0 2 0;
}
.topbar .function-combo .list-cell .secondary {
    -fx-font-size: 11px;
    -fx-text-fill: rgba(245,245,247,0.75);
}

/* גם בפריט הנבחר (buttonCell) */
.topbar .function-combo .button-cell .primary {
    -fx-font-weight: 700;
}
.topbar .function-combo .button-cell .secondary {
    -fx-font-size: 11px;
    -fx-text-fill: rgba(245,245,247,0.75);
}

/* Placeholder של הקומבו (כאשר אין פונקציות) */
.topbar .function-combo .placeholder .label {
    -fx-text-fill: rgba(245,245,247,0.65);
}

/* ליישור ויזואלי — אם רוצים מרווח קטן מימין לשדה */
.topbar .function-combo {
    -fx-padding: 0 4 0 4;
}
